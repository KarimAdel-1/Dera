# =====================================================
# DERA PROTOCOL - DEPLOYMENT CONFIGURATION
# =====================================================
# Copy this file to .env and fill in your values
# This template includes ALL environment variables needed for deployment

# =====================================================
# HEDERA NETWORK CONFIGURATION
# =====================================================

# Network Selection: testnet or mainnet
HEDERA_NETWORK=testnet

# Hedera RPC Endpoints
HEDERA_TESTNET_RPC=https://testnet.hashio.io/api
HEDERA_MAINNET_RPC=https://mainnet.hashio.io/api

# Mirror Node API Endpoints
HEDERA_TESTNET_MIRROR_NODE=https://testnet.mirrornode.hedera.com
HEDERA_MAINNET_MIRROR_NODE=https://mainnet.mirrornode.hedera.com

# =====================================================
# DEPLOYMENT ACCOUNT (ADMIN)
# =====================================================

# Hedera Account ID (format: 0.0.xxxxx)
HEDERA_OPERATOR_ID=

# Private Key (DER encoded, starts with 302e...)
HEDERA_OPERATOR_KEY=

# EVM Private Key (for contract deployment via JSON-RPC)
PRIVATE_KEY=

# =====================================================
# CORE PROTOCOL CONTRACTS (Fill after deployment)
# =====================================================

# Pool Addresses Provider (deployed first)
POOL_ADDRESSES_PROVIDER=

# Pool Implementation Contract
POOL_ADDRESS=

# Pool Configurator
POOL_CONFIGURATOR=

# ACL Manager (Access Control)
ACL_MANAGER=

# =====================================================
# ORACLE AND PRICE FEEDS
# =====================================================

# Dera Oracle Contract
ORACLE_ADDRESS=

# Pyth Oracle Contract (Hedera)
PYTH_CONTRACT_ADDRESS=0x0708325268dF9F66270F1401206434524814508b

# Pyth Price Feed IDs (32-byte hex strings)
PYTH_PRICE_FEED_IDS_HBAR=
PYTH_PRICE_FEED_IDS_USDC=

# Price Oracle Sentinel (optional)
PRICE_ORACLE_SENTINEL=

# =====================================================
# HEDERA-SPECIFIC CONTRACTS
# =====================================================

# HCS Event Streamer
HCS_EVENT_STREAMER_ADDRESS=

# Node Staking Contract
NODE_STAKING_CONTRACT_ADDRESS=

# Mirror Node Analytics
ANALYTICS_CONTRACT_ADDRESS=

# Protocol Integration Contract
PROTOCOL_INTEGRATION_ADDRESS=

# Interest Rate Model
INTEREST_RATE_MODEL_ADDRESS=

# =====================================================
# HCS TOPIC IDS (Create these first)
# =====================================================

# Event Streaming Topics (format: 0.0.xxxxx)
HCS_SUPPLY_TOPIC=
HCS_WITHDRAW_TOPIC=
HCS_BORROW_TOPIC=
HCS_REPAY_TOPIC=
HCS_LIQUIDATION_TOPIC=
HCS_CONFIG_TOPIC=
HCS_GOVERNANCE_TOPIC=

# =====================================================
# TREASURY AND FEES
# =====================================================

# Treasury Address (Collector contract)
TREASURY_ADDRESS=

# Treasury HBAR Receiver (for node staking)
TREASURY_HBAR_RECEIVER=

# =====================================================
# TOKEN ADDRESSES (HTS Tokens)
# =====================================================

# HBAR (native) - use 0x0000000000000000000000000000000000000000
TOKEN_HBAR=0x0000000000000000000000000000000000000000

# USDC (HTS token on Hedera testnet)
TOKEN_USDC_TESTNET=0.0.429274

# USDC (HTS token on Hedera mainnet)
TOKEN_USDC_MAINNET=0.0.456858

# =====================================================
# SUPPLY AND BORROW TOKENS (dTokens & debtTokens)
# =====================================================

# These are deployed automatically by Pool for each asset

# HBAR dToken (dHBAR)
DTOKEN_HBAR=

# USDC dToken (dUSDC)
DTOKEN_USDC=

# HBAR debtToken (debtHBAR)
DEBT_TOKEN_HBAR=

# USDC debtToken (debtUSDC)
DEBT_TOKEN_USDC=

# =====================================================
# HELPER CONTRACTS
# =====================================================

# Liquidation Data Provider
LIQUIDATION_DATA_PROVIDER_ADDRESS=

# UI Pool Data Provider
UI_POOL_DATA_PROVIDER_ADDRESS=

# Wallet Balance Provider
WALLET_BALANCE_PROVIDER_ADDRESS=

# =====================================================
# BACKEND SERVICES CONFIGURATION
# =====================================================

# HCS Event Service
HCS_EVENT_SERVICE_PORT=3001
HCS_EVENT_SERVICE_URL=http://localhost:3001

# Liquidation Bot
LIQUIDATION_BOT_CHECK_INTERVAL_MS=30000
LIQUIDATION_BOT_MIN_PROFIT_USD=10

# Monitoring Service
MONITORING_SERVICE_PORT=3002
MONITORING_SERVICE_CHECK_INTERVAL_MS=60000

# Node Staking Service
NODE_STAKING_SERVICE_PORT=3003
NODE_STAKING_SERVICE_INTERVAL_MS=3600000

# Rate Updater Service
RATE_UPDATER_SERVICE_PORT=3004
RATE_UPDATER_SERVICE_INTERVAL_MS=300000

# Rate Limiting Service
RATE_LIMITING_SERVICE_PORT=3005

# =====================================================
# DATABASE CONFIGURATION (Optional)
# =====================================================

# PostgreSQL (for analytics and events)
DATABASE_URL=postgresql://user:password@localhost:5432/dera_protocol

# Redis (for caching and rate limiting)
REDIS_URL=redis://localhost:6379

# =====================================================
# FRONTEND CONFIGURATION
# =====================================================

# Next.js
NEXT_PUBLIC_RPC_URL=https://testnet.hashio.io/api
NEXT_PUBLIC_MIRROR_NODE_URL=https://testnet.mirrornode.hedera.com
NEXT_PUBLIC_NETWORK_ID=296

# Contract Addresses (for frontend)
NEXT_PUBLIC_POOL_ADDRESS=${POOL_ADDRESS}
NEXT_PUBLIC_ORACLE_ADDRESS=${ORACLE_ADDRESS}
NEXT_PUBLIC_HCS_STREAMER_ADDRESS=${HCS_EVENT_STREAMER_ADDRESS}
NEXT_PUBLIC_NODE_STAKING_ADDRESS=${NODE_STAKING_CONTRACT_ADDRESS}
NEXT_PUBLIC_ANALYTICS_ADDRESS=${ANALYTICS_CONTRACT_ADDRESS}

# HCS Topics (for frontend event monitoring)
NEXT_PUBLIC_HCS_SUPPLY_TOPIC=${HCS_SUPPLY_TOPIC}
NEXT_PUBLIC_HCS_WITHDRAW_TOPIC=${HCS_WITHDRAW_TOPIC}
NEXT_PUBLIC_HCS_BORROW_TOPIC=${HCS_BORROW_TOPIC}
NEXT_PUBLIC_HCS_REPAY_TOPIC=${HCS_REPAY_TOPIC}
NEXT_PUBLIC_HCS_LIQUIDATION_TOPIC=${HCS_LIQUIDATION_TOPIC}

# =====================================================
# ADMIN ROLES
# =====================================================

# Pool Admin (can configure protocol parameters)
POOL_ADMIN=${HEDERA_OPERATOR_ID}

# Emergency Admin (can pause protocol)
EMERGENCY_ADMIN=${HEDERA_OPERATOR_ID}

# Risk Admin (can adjust risk parameters)
RISK_ADMIN=${HEDERA_OPERATOR_ID}

# =====================================================
# MONITORING AND ALERTING
# =====================================================

# Webhook URLs for alerts
ALERT_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=
SLACK_WEBHOOK_URL=

# Email Configuration
ALERT_EMAIL_FROM=
ALERT_EMAIL_TO=

# =====================================================
# TESTING AND DEVELOPMENT
# =====================================================

# Gas Reporting
REPORT_GAS=false
COINMARKETCAP_API_KEY=

# Debug Mode
DEBUG=false
LOG_LEVEL=info

# Test Accounts (for local testing)
TEST_ACCOUNT_1=
TEST_ACCOUNT_2=
TEST_ACCOUNT_3=

# =====================================================
# NODE STAKING CONFIGURATION
# =====================================================

# Hedera Node IDs to stake with (comma-separated)
STAKING_NODE_IDS=0.0.3,0.0.4,0.0.5

# Minimum staking amount (in HBAR)
MIN_STAKING_AMOUNT=1

# =====================================================
# RATE LIMITING CONFIGURATION
# =====================================================

# Max requests per minute per user
RATE_LIMIT_PER_MINUTE=60

# Max requests per hour per IP
RATE_LIMIT_PER_HOUR=1000

# Anti-MEV protection
ENABLE_ANTI_MEV=true
MEV_PROTECTION_DELAY_MS=1000

# =====================================================
# LIQUIDATION BOT CONFIGURATION
# =====================================================

# Monitored user addresses (comma-separated)
MONITORED_ADDRESSES=

# Default collateral and debt assets
DEFAULT_COLLATERAL_ASSET=${TOKEN_HBAR}
DEFAULT_DEBT_ASSET=${TOKEN_USDC_TESTNET}

# Estimated gas cost in USD
ESTIMATED_GAS_COST_USD=0.5

# =====================================================
# NOTES
# =====================================================

# DEPLOYMENT ORDER:
# 1. Deploy Pool Addresses Provider
# 2. Deploy Pool Implementation & Configurator
# 3. Deploy Oracle
# 4. Initialize Pool with assets (HBAR, USDC)
# 5. Deploy Hedera-specific contracts
# 6. Create HCS topics
# 7. Configure Pool with contract addresses
# 8. Set up backend services
# 9. Configure frontend
# 10. Test end-to-end flow

# HEDERA ACCOUNT ID FORMAT:
# - Testnet: 0.0.xxxxx
# - Mainnet: 0.0.xxxxx
# - Example: 0.0.12345

# HEDERA TOPIC ID FORMAT:
# - Same as account ID format
# - Example: 0.0.200001

# HTS TOKEN ADDRESS FORMATS:
# - Hedera format: 0.0.xxxxx (native)
# - EVM format: 0x... (for JSON-RPC compatibility)
# - Use Hedera format in backend, EVM format in frontend

# IMPORTANT:
# - Never commit .env file to git
# - Keep private keys secure
# - Use different keys for testnet and mainnet
# - Rotate keys regularly
# - Use hardware wallets for mainnet admin keys
